<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Dashboard</title>
    <link rel="stylesheet" href="home.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Student Dashboard</h1>
            <div class="user-info">
                <span id="studentName">Welcome, Student</span>
                <button class="btn-logout" onclick="logout()">Logout</button>
            </div>
        </header>

        <div class="dashboard">
            <div class="card">
                <h2>My Information</h2>
                <div id="studentInfo" class="info-section">
                    <p><strong>Student ID:</strong> <span id="studentId"></span></p>
                    <p><strong>Name:</strong> <span id="fullName"></span></p>
                    <p><strong>Date of Birth:</strong> <span id="dobDisplay"></span></p>
                    <p><strong>Gender:</strong> <span id="genderDisplay"></span></p>
                    <p><strong>Address:</strong> <span id="studentAddressDisplay"></span></p>
                    <p><strong>Email:</strong> <span id="email"></span></p>
                    <p><strong>Phone:</strong> <span id="phone"></span></p>
                </div>
                
                <h3 style="margin-top: 20px; color: #667eea;">Guardian Information</h3>
                <div class="info-section">
                    <p><strong>Guardian 1:</strong> <span id="guardian1Name"></span></p>
                    <p><strong>Relationship:</strong> <span id="guardian1Relationship"></span></p>
                    <p><strong>Phone:</strong> <span id="guardian1Phone"></span></p>
                    <hr style="margin: 10px 0;">
                    <p><strong>Guardian 2:</strong> <span id="guardian2Name"></span></p>
                    <p><strong>Relationship:</strong> <span id="guardian2Relationship"></span></p>
                    <p><strong>Phone:</strong> <span id="guardian2Phone"></span></p>
                </div>
                
                <div class="action-buttons" style="margin-top: 20px; display: flex; gap: 10px; flex-wrap: wrap;">
                    <button class="btn-primary" onclick="generateStudentCard()">Generate Student Card</button>
                    <button class="btn-primary" onclick="generateReport()">Generate Report</button>
                </div>
            </div>

            <div class="card">
                <h2>Application Status</h2>
                <div id="applicationStatus" class="status-section">
                    <p><strong>Status:</strong> <span id="status" class="status-badge"></span></p>
                    <p><strong>Application Date:</strong> <span id="appDate"></span></p>
                    <p id="rejectionReason" class="hidden"><strong>Reason:</strong> <span id="reason"></span></p>
                </div>
            </div>

            <div class="card">
                <h2>My Marks</h2>
                <div id="marksSection">
                    <table id="marksTable">
                        <thead>
                            <tr>
                                <th>Subject</th>
                                <th>Marks</th>
                                <th>Max Marks</th>
                                <th>Percentage</th>
                                <th>Grade</th>
                            </tr>
                        </thead>
                        <tbody id="marksBody">
                            <!-- Marks will be loaded here -->
                        </tbody>
                    </table>
                    <div class="total-section">
                        <p><strong>Average Percentage:</strong> <span id="averageMarks"></span></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Student Card Modal -->
    <div id="studentCardModal" class="modal hidden">
        <div class="modal-content" style="max-width: 450px;">
            <div id="studentCardContainer">
                <div class="student-card">
                    <div class="card-header">
                        <h1 class="school-name">TRESOR COLLEGE</h1>
                        <p class="card-subtitle">Student Identification Card</p>
                    </div>
                    <div class="card-body">
                        <div class="student-photo">
                            <div class="photo-placeholder">
                                <span id="cardInitials"></span>
                            </div>
                        </div>
                        <div class="card-details">
                            <div class="detail-row">
                                <span class="detail-label">Student ID:</span>
                                <span class="detail-value" id="cardStudentId"></span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Name:</span>
                                <span class="detail-value" id="cardStudentName"></span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Grade:</span>
                                <span class="detail-value" id="cardGrade"></span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Class Teacher:</span>
                                <span class="detail-value" id="cardTeacher"></span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Academic Year:</span>
                                <span class="detail-value" id="cardYear"></span>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer">
                        <p>This card is property of Tresor College and must be carried at all times</p>
                    </div>
                </div>
            </div>
            <div class="modal-actions" style="margin-top: 20px;">
                <button class="btn-primary" onclick="printStudentCard()">Print Card</button>
                <button class="btn-secondary" onclick="closeStudentCard()">Close</button>
            </div>
        </div>
    </div>

    <!-- Report Modal -->
    <div id="reportModal" class="modal hidden">
        <div class="modal-content" style="max-width: 800px;">
            <div id="reportContainer">
                <div class="report">
                    <div class="report-header">
                        <h1>TRESOR COLLEGE</h1>
                        <h2>Academic Report</h2>
                        <p class="report-date" id="reportDate"></p>
                    </div>
                    <div class="report-student-info">
                        <div class="report-info-row">
                            <span><strong>Student ID:</strong> <span id="reportStudentId"></span></span>
                            <span><strong>Name:</strong> <span id="reportStudentName"></span></span>
                        </div>
                        <div class="report-info-row">
                            <span><strong>Grade:</strong> <span id="reportGrade"></span></span>
                            <span><strong>Class Teacher:</strong> <span id="reportTeacher"></span></span>
                        </div>
                    </div>
                    <div class="report-marks">
                        <h3>Academic Performance</h3>
                        <table class="report-table">
                            <thead>
                                <tr>
                                    <th>Subject</th>
                                    <th>Marks Obtained</th>
                                    <th>Maximum Marks</th>
                                    <th>Percentage</th>
                                    <th>Grade</th>
                                </tr>
                            </thead>
                            <tbody id="reportMarksBody">
                            </tbody>
                            <tfoot>
                                <tr class="report-total">
                                    <td colspan="3"><strong>Overall Average</strong></td>
                                    <td><strong id="reportAverage"></strong></td>
                                    <td><strong id="reportOverallGrade"></strong></td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                    <div class="report-footer">
                        <div class="signature-section">
                            <div>
                                <p>_____________________</p>
                                <p>Class Teacher</p>
                            </div>
                            <div>
                                <p>_____________________</p>
                                <p>Principal</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-actions" style="margin-top: 20px;">
                <button class="btn-primary" onclick="printReport()">Print Report</button>
                <button class="btn-secondary" onclick="closeReport()">Close</button>
            </div>
        </div>
    </div>

    <script src="functions.js"></script>
    <script>
        // Load student data on page load
        window.onload = function() {
            loadStudentData();
        };
    </script>
</body>
</html>
